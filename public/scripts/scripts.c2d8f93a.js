"use strict";angular.module("ng32App",["ngRoute","ngSanitize","ngTouch","mm.foundation","ngGeolocation","highcharts-ng"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("ng32App").controller("MainCtrl",["$scope","PoliFactory","googleAPI","$modal",function(a,b,c,d){function e(){a.banner=!1}function f(a){angular.forEach(a,function(a){a.img="../images/spinner.svg",c.getThumb(a.drive_id).success(function(b){a.img=b.thumbnailLink}).error(function(){a.img="../images/nopic.png"})})}a.states=[{name:"AL"},{name:"AK"},{name:"AZ"},{name:"AR"},{name:"CA"},{name:"CO"},{name:"CT"},{name:"DE"},{name:"FL"},{name:"GA"},{name:"HI"},{name:"ID"},{name:"IL"},{name:"IN"},{name:"IA"},{name:"KS"},{name:"KY"},{name:"LA"},{name:"ME"},{name:"MD"},{name:"MA"},{name:"MI"},{name:"MN"},{name:"MS"},{name:"MO"},{name:"MT"},{name:"NE"},{name:"NV"},{name:"NH"},{name:"NJ"},{name:"NM"},{name:"NY"},{name:"NC"},{name:"ND"},{name:"OH"},{name:"OK"},{name:"OR"},{name:"PA"},{name:"RI"},{name:"SC"},{name:"SD"},{name:"TN"},{name:"TX"},{name:"UT"},{name:"VT"},{name:"VA"},{name:"WA"},{name:"WV"},{name:"WI"},{name:"WY"}],a.banner=!0,a.getPoliFromState=function(c){e(),b.fromState(c.name).success(function(b){f(b);for(var c=[];b.length;)c.push(b.splice(0,4));a.politicians=c})},a.typeahead=function(a){return b.searchDb(a).then(function(a){var b=[];return angular.forEach(a.data,function(a){b.push(a.full_name)}),b})},a.searchResults=function(c){e(),b.getPolitician(c).success(function(b){a.politicians={politician:b},f(b)})},a.open=function(a){a.loading="images/spinner.svg";var c=d.open({templateUrl:"views/poliModal.html",controller:"ModalInstanceCtrl",windowClass:"large-12 columns pol_modal",resolve:{politician:function(){return b.getContributions(a.id).success(function(){})}}});c.opened.then(function(){console.log(a.loading),a.loading=" "})}}]),angular.module("ng32App").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("ng32App").factory("googleAPI",["$http",function(a){var b="AIzaSyB_Gu6uDOCsvVNawWd7WT05F7pqMAnE2O4",c="https://www.googleapis.com/drive/v2/files/",d="https://maps.googleapis.com/maps/api/geocode/json",e={};return e.getZip=function(c){return a.get(d,{params:{latlng:c.toString(),key:b,result_type:"postal_code"}})},e.getThumb=function(d){return a.get(c+d,{params:{fields:"thumbnailLink",key:b}})},e}]),angular.module("ng32App").factory("PoliFactory",["$http",function(a){var b="/politicians",c={};return c.getPoliticians=function(){return a.get(b)},c.getPolitician=function(c){return a.get(b,{params:{full_name:c}})},c.searchDb=function(c){return a.get(b,{params:{q:c}})},c.fromState=function(c){return a.get(b,{params:{state:c}})},c.getContributions=function(c){return a.post(b+"/"+c+"/contributions")},c}]),angular.module("ng32App").controller("ModalInstanceCtrl",["$scope","$timeout","politician","$modalInstance",function(a,b,c,d){function e(){var b=[],c=[],d=[],e=[],f=[],g=[],h=[];angular.forEach(a.pol.contribution.industries,function(a){b.push(a.name),c.push(a.total)}),angular.forEach(a.pol.contribution.organizations,function(a){d.push(a.name),e.push(a.employee_total),f.push(a.direct_total)}),angular.forEach(a.pol.contribution.word_counts,function(a){g.push(a.word),h.push(a.count)}),a.pol.charts={sectorChart:{categories:b,data:c},orgChart:{categories:d,data:[e,f]},wordChart:{categories:g,data:h}}}a.pol=c.data,a.ok=function(){d.close()},a.drawChart=function(){a.$broadcast("highchartsng.reflow")},b(a.drawChart,20),e(),a.orgChartConfig={options:{chart:{type:"column"},plotOptions:{series:{stacking:"enabled"}},xAxis:{categories:a.pol.charts.orgChart.categories}},series:[{name:"Employee Contributions",data:a.pol.charts.orgChart.data[0]},{name:"Company Contributions",data:a.pol.charts.orgChart.data[1]}],title:{text:"Contributions by Organization"},func:function(b){a.$evalAsync(function(){b.reflow()})}},a.sectorChartConfig={options:{chart:{type:"column"},xAxis:{categories:a.pol.charts.sectorChart.categories}},series:[{name:"Total",data:a.pol.charts.sectorChart.data}],title:{text:"Contributions by Sector of Economy"}},a.wordChartConfig={options:{chart:{type:"column"},xAxis:{categories:a.pol.charts.wordChart.categories}},series:[{name:"words",data:a.pol.charts.wordChart.data}],title:{text:"Most and Least Words Spoken"}}}]);